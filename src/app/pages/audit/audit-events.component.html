    <mat-card>
      <mat-card-title data-tutorial="audit-log">Audit Log</mat-card-title>
      <mat-card-content>
        <div class="pt-row pt-toolbar">
          <span class="pt-muted">Showing {{ total }} events</span>
          <span style="flex: 1 1 auto"></span>
          <button mat-stroked-button color="primary" (click)="reload()" [disabled]="loading">
            <mat-icon>refresh</mat-icon>
            Refresh
          </button>
        </div>

        <form class="pt-filters" [formGroup]="filterForm" (ngSubmit)="applyFilters()">
          <div class="pt-filter-grid">
            <mat-form-field appearance="outline">
              <mat-label>BOM ID</mat-label>
              <input matInput formControlName="bom_id" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Actor ID</mat-label>
              <input matInput formControlName="actor_id" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Event type</mat-label>
              <input matInput formControlName="event_type" placeholder="bom.item_signoff_decided" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Created from</mat-label>
              <input matInput type="date" formControlName="created_from" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Created to</mat-label>
              <input matInput type="date" formControlName="created_to" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Order</mat-label>
              <mat-select formControlName="order">
                <mat-option value="-created_at">Newest first</mat-option>
                <mat-option value="created_at">Oldest first</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="pt-filter-actions">
            <button mat-raised-button color="primary" type="submit">Apply filters</button>
            <button mat-button type="button" (click)="resetFilters()">Reset</button>
          </div>
        </form>

        <div *ngIf="loading" class="pt-row" style="gap:12px; align-items:center">
          <span>No data available</span>
        </div>

        <table mat-table [dataSource]="events" class="pt-table" *ngIf="!loading">
          <ng-container matColumnDef="event">
            <th mat-header-cell *matHeaderCellDef>Event</th>
            <td mat-cell *matCellDef="let e">
              <div class="pt-title">{{ e.event_type }}</div>
              <div class="pt-muted" *ngIf="e.message">{{ e.message }}</div>
              <pre class="pt-data" *ngIf="e.data">{{ e.data | json }}</pre>
            </td>
          </ng-container>

          <ng-container matColumnDef="actor">
            <th mat-header-cell *matHeaderCellDef>Actor</th>
            <td mat-cell *matCellDef="let e">{{ e.actor ? '#' + e.actor : '?' }}</td>
          </ng-container>

          <ng-container matColumnDef="bom">
            <th mat-header-cell *matHeaderCellDef>BOM</th>
            <td mat-cell *matCellDef="let e">
              <a *ngIf="e.bom" class="pt-link" [routerLink]="['/boms', e.bom]">#{{ e.bom }}</a>
              <span *ngIf="!e.bom">?</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef>Created</th>
            <td mat-cell *matCellDef="let e">{{ e.created_at | date: 'medium' }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <div class="pt-muted" *ngIf="!loading && !events.length">No audit events found.</div>

        <div class="pt-pagination" *ngIf="!loading && total">
          <span class="pt-muted">Page {{ page }} - {{ total }} total</span>
          <span style="flex: 1 1 auto"></span>
          <mat-form-field appearance="outline" class="pt-page-size">
            <mat-label>Page size</mat-label>
            <mat-select [value]="pageSize" (selectionChange)="updatePageSize($event.value)">
              <mat-option [value]="10">10</mat-option>
              <mat-option [value]="25">25</mat-option>
              <mat-option [value]="50">50</mat-option>
              <mat-option [value]="100">100</mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-stroked-button color="primary" (click)="prevPage()" [disabled]="!hasPrev">Prev</button>
          <button mat-stroked-button color="primary" (click)="nextPage()" [disabled]="!hasNext">Next</button>
        </div>
      </mat-card-content>
    </mat-card>
  

